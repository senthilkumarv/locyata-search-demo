<?xml version="1.0" encoding="UTF-8"?><html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops"><head><meta content="text/html; charset=utf-8" http-equiv="default-style"/><title>Task 2: Observe the Flash File System and Add Boot System CommandsEPUB 3a959fd08-369e-42f9-8dc2-6c261988e5f7</title><link type="text/css" rel="STYLESHEET" href="ContentPackages/Core/Stylesheets/Core.css?bv=72"/><link type="text/css" rel="STYLESHEET" href="ContentPackages/Core/Stylesheets/jquery-ui-all.css?bv=72"/><link type="text/css" rel="STYLESHEET" href="ContentPackages/Core/Stylesheets/jquery.alerts.css?bv=72"/></head><body class=""><div class="Procedure"><div class="Title_Procedure">Task 2: Observe the Flash File System and Add Boot System Commands</div><div id="N20009" class="ParagraphType ParaBlock"><div class="Wysiwyg">In this task, you will determine the Cisco IOS system file that is being used. You will then add three boot system commands that modify the default behavior of file choice at startup. Changes to the booting process flow should be used with extreme caution, because errors may leave your router potentially unreachable over the network. This fact explains why only senior network administrators usually do this process.</div></div><div class="TitledBlockType"><div class="TitledBlockType_Title">Activity Procedure</div><div class="ParagraphType"><div class="Wysiwyg">Complete these steps:</div></div></div><div id="StepGroup" class="StepGroup"><div id="Step0"><table class="StepActionTable" id="Step0Body"><tbody><tr><td colspan="2" class="Separator">Step1</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">Enter the <span class="WysiwygEmph">show flash:</span> command to output the files that are currently stored in the flash memory. Your output should be similar to the following example:</td></tr><tr><td class="StepCell"/><td style="padding-left: 0px;padding-bottom: 5px;" class="StepCell"><div class="CodeEPUB">RouterX#show flash:<br/>-#- --length-- -----date/time------ path<br/>1     36232088 Mar 28 2007 17:27:46 +00:00 c2800nm-advipservicesk9-mz.124-12.bin<br/>2         1823 Dec 14 2006 08:25:40 +00:00 sdmconfig-2811.cfg<br/>3      4734464 Dec 14 2006 08:26:10 +00:00 sdm.tar<br/>4       833024 Dec 14 2006 08:26:26 +00:00 es.tar<br/>5      1052160 Dec 14 2006 08:26:46 +00:00 common.tar<br/>6         1038 Dec 14 2006 08:27:02 +00:00 home.shtml<br/>7       102400 Dec 14 2006 08:27:24 +00:00 home.tar<br/>8       491213 Dec 14 2006 08:27:48 +00:00 128MB.sdf <br/> <br/>20557824 bytes available (43458560 bytes used)</div></td></tr></tbody></table></div><div id="Step1"><table class="StepActionTable" id="Step1Body"><tbody><tr><td colspan="2" class="Separator">Step2</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">You should note that the Cisco IOS binary file is identified with a .bin extension. The other files (in the previous example display) are related to the Cisco SDM configuration program. It is possible to have multiple Cisco IOS images in flash memory. Write the file name of Cisco IOS binary file in the following space; in the example, it is c2800nm-advipservicesk9-mz.124-12.bin.</td></tr><tr><td class="StepCell"/><td style="padding-left: 0px;padding-bottom: 5px;" class="StepCell"><div class="Wysiwyg">__________________________________________________________________________________</div></td></tr></tbody></table></div><div id="Step2"><table class="StepActionTable" id="Step2Body"><tbody><tr><td colspan="2" class="Separator">Step3</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">The first found binary file in flash determines the Cisco IOS image that is loaded at a restart. This order can be modified by using the <span class="WysiwygEmph">boot system flash </span><span class="WysiwygItalic">filename.bin</span> configuration commands.</td></tr><tr><td class="StepCell"/><td style="padding-left: 0px;padding-bottom: 5px;" class="StepCell"><table class="CustomNote"><tr><td class="AreaIcon"><img style="cursor: pointer; width:px ; height:px" src="ContentPackages/media/Core/CustomNote.png" alt=""/></td><td class="AreaContent"><div class="Wysiwyg">Extreme care should be taken when using boot system commands, because an error may leave the router unable to start, which can lead to significant downtime while the boot process is restored. For this reason, senior network administrators usually modify the Cisco IOS flash files and modify the boot sequence.</div></td></tr></table></td></tr></tbody></table></div><div id="Step3"><table class="StepActionTable" id="Step3Body"><tbody><tr><td colspan="2" class="Separator">Step4</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">Before attempting to save or copy files from a TFTP server, it is a good idea to test that the server is reachable. Enter the command to ping your workgroup TFTP server, 10.<span class="WysiwygItalic">x.x</span>.1. Your output should look similar to the following example:</td></tr><tr><td class="StepCell"/><td style="padding-left: 0px;padding-bottom: 5px;" class="StepCell"><div class="CodeEPUB">RouterX#ping 10.10.10.1 <br/> <br/>Type escape sequence to abort.<br/>Sending 5, 100-byte ICMP Echos to 10.10.10.1, timeout is 2 seconds:<br/>.!!!!<br/>Success rate is 80 percent (4/5), round-trip min/avg/max = 1/1/1 ms</div><table class="CustomNote"><tr><td class="AreaIcon"><img style="cursor: pointer; width:px ; height:px" src="ContentPackages/media/Core/CustomNote.png" alt=""/></td><td class="AreaContent"><div class="Wysiwyg">If the ping to the TFTP server is unsuccessful, verify that both your workgroup switch ports fa0/11 and fa0/12 are not administratively down.</div></td></tr></table></td></tr></tbody></table></div><div id="Step4"><table class="StepActionTable" id="Step4Body"><tbody><tr><td colspan="2" class="Separator">Step5</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">At the global configuration prompt, enter the <span class="WysiwygEmph">boot system tftp</span> <span class="WysiwygItalic">filename tftp_address,</span> where <span class="WysiwygItalic">filename</span> is the name that you noted in Step 2 and <span class="WysiwygItalic">tftp_address</span> is the IP address of your workgroup TFTP server, which can be found in the TFTP Server IP Address Information table in this lab activity. By entering this command first, the router on reload attempts to locate and load its Cisco IOS file from the TFTP server that is specified. Your output should be similar to the following example: </td></tr><tr><td class="StepCell"/><td style="padding-left: 0px;padding-bottom: 5px;" class="StepCell"><div class="CodeEPUB">RouterX(config)#<span class="WysiwygEmph">boot system tftp</span> c2800nm-advipservicesk9-mz.124-12.bin<span class="WysiwygEmph"> 10.x.x.1</span></div></td></tr></tbody></table></div><div id="Step5"><table class="StepActionTable" id="Step5Body"><tbody><tr><td colspan="2" class="Separator">Step6</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">Enter the <span class="WysiwygEmph">boot system flash</span> <span class="WysiwygItalic">filename</span> command, where <span class="WysiwygItalic">filename</span> is the name that you copied in Step 2. If this command is processed, the router will attempt to load the Cisco IOS file from flash memory by using the filename that is specified. Your output should be similar to the following example:</td></tr><tr><td class="StepCell"/><td style="padding-left: 0px;padding-bottom: 5px;" class="StepCell"><div class="CodeEPUB">RouterX(config)#<span class="WysiwygEmph">boot system flash</span> c2800nm-advipservicesk9-mz.124-12.bin</div></td></tr></tbody></table></div><div id="Step6"><table class="StepActionTable" id="Step6Body"><tbody><tr><td colspan="2" class="Separator">Step7</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">Enter the <span class="WysiwygEmph">boot system flash</span> command; no filename is necessary. This command, if processed, will load the router with the first Cisco IOS file that is found in flash memory. Your output should be similar to the following example:</td></tr><tr><td class="StepCell"/><td style="padding-left: 0px;padding-bottom: 5px;" class="StepCell"><div class="CodeEPUB">RouterX(config)#<span class="WysiwygEmph">boot system flash</span></div></td></tr></tbody></table></div><div id="Step7"><table class="StepActionTable" id="Step7Body"><tbody><tr><td colspan="2" class="Separator">Step8</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">Enter the command to leave the configuration mode.</td></tr></tbody></table></div><div id="Step8"><table class="StepActionTable" id="Step8Body"><tbody><tr><td colspan="2" class="Separator">Step9</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">Enter the <span class="WysiwygEmph">show run</span> command and observe the output to verify that your boot system commands are accurately entered. Your output should be similar to the following example but should show your workgroup hostname and filenames.</td></tr><tr><td class="StepCell"/><td style="padding-left: 0px;padding-bottom: 5px;" class="StepCell"><div class="CodeEPUB">..<br/>..Text omitted<br/>..<br/>hostname RouterX<br/>!<br/>boot-start-marker<br/><span class="WysiwygEmph">boot system tftp</span> c2800nm-advipservicesk9-mz.124-12.bin <span class="WysiwygEmph">10.x.x.1 boot system flash</span> c2800nm-advipservicesk9-mz.124-12.bin<br/><span class="WysiwygEmph">boot system flash</span><br/>boot-end-marker<br/>!</div></td></tr></tbody></table></div><div id="Step9"><table class="StepActionTable" id="Step9Body"><tbody><tr><td colspan="2" class="Separator">Step10</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">Make any necessary corrections before proceeding to the next step.</td></tr></tbody></table></div><div id="Step10"><table class="StepActionTable" id="Step10Body"><tbody><tr><td colspan="2" class="Separator">Step11</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">Enter the <span class="WysiwygEmph">copy run start</span> command to save your running configuration to NVRAM.</td></tr><tr><td class="StepCell"/><td style="padding-left: 0px;padding-bottom: 5px;" class="StepCell"><table class="CustomNote"><tr><td class="AreaIcon"><img style="cursor: pointer; width:px ; height:px" src="ContentPackages/media/Core/CustomNote.png" alt=""/></td><td class="AreaContent"><div class="Wysiwyg">The reload process will take a variable amount of time, with the low end being approximately 5 to 8 minutes, depending on router hardware and the performance of the TFTP server. A reload from flash memory takes 2 to 3 minutes for same router hardware.</div></td></tr></table></td></tr></tbody></table></div><div id="Step11"><table class="StepActionTable" id="Step11Body"><tbody><tr><td colspan="2" class="Separator">Step12</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">Enter and confirm the <span class="WysiwygEmph">reload</span> command. Observe the output that is displayed during the reload. In the space below, write the location that you believe provided the Cisco IOS file to load.</td></tr></tbody></table></div><div id="Step12"><table class="StepActionTable" id="Step12Body"><tbody><tr><td colspan="2" class="Separator">Step13</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">Your output should be similar to the following example:</td></tr><tr><td class="StepCell"/><td style="padding-left: 0px;padding-bottom: 5px;" class="StepCell"><div class="CodeEPUB">RouterX#<span class="WysiwygEmph">reload</span><br/>Proceed with reload? [confirm]<span class="WysiwygEmph">&lt;ENTER&gt;</span><br/>*Apr  6 18:17:24.619: %SYS-5-RELOAD: Reload requested by console. Reload Reason: Reload Command. <br/> <br/>System Bootstrap, Version 12.4(13r)T, RELEASE SOFTWARE (fc1) <br/> <br/>..<br/>..Text omitted<br/>..<br/><span class="WysiwygEmph">&lt;ENTER&gt;&lt;ENTER&gt;</span><br/>*Apr  6 18:22:16.311: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to up<br/>**********  Warning   *************<br/>Access to this device is restricted to authorized persons only!<br/>Un-authorized access is prohibited. Violators will be prosecuted. <br/> <br/>**************************************************************^ <br/> <br/>User Access Verification <br/> <br/>Password:</div></td></tr></tbody></table></div><div id="Step13"><table class="StepActionTable" id="Step13Body"><tbody><tr><td colspan="2" class="Separator">Step14</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">When your router has finished reloading, press <span class="WysiwygEmph">Enter</span> twice to ensure that you are at a login prompt. Enter the information to get to the privileged EXEC mode.</td></tr></tbody></table></div><div id="Step14"><table class="StepActionTable" id="Step14Body"><tbody><tr><td colspan="2" class="Separator">Step15</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">Enter the <span class="WysiwygEmph">show version</span> command and observe the display to confirm the location of the Cisco IOS file. Your output should be similar to the following example:</td></tr><tr><td class="StepCell"/><td style="padding-left: 0px;padding-bottom: 5px;" class="StepCell"><div class="CodeEPUB">RouterX#<span class="WysiwygEmph">sh version</span><br/>Cisco IOS Software, 2800 Software (C2800NM-ADVIPSERVICESK9-M), Version 12.4(12), RELEASE SOFTWARE (fc1)<br/>Technical Support: http://www.cisco.com/techsupport<br/>Copyright (c) 1986-2006 by Cisco Systems, Inc.<br/>Compiled Fri 17-Nov-06 12:02 by prod_rel_team <br/> <br/>ROM: System Bootstrap, Version 12.4(13r)T, RELEASE SOFTWARE (fc1) <br/> <br/>RouterX uptime is 1 minute<br/>System returned to ROM by reload at 18:17:24 UTC Fri Apr 6 2007<br/><span class="WysiwygEmph">System image file is "tftp://10.x.x.1/c2800nm-advipservicesk9-mz.124-12.bin" <br/></span> <br/>..<br/>..TEXT omitted<br/>..<br/>--More—<span class="WysiwygEmph">q</span>  </div></td></tr></tbody></table></div><div id="Step15"><table class="StepActionTable" id="Step15Body"><tbody><tr><td colspan="2" class="Separator">Step16</td></tr><tr class="UserAction"><td class="None"><img alt="" width="21" src="ContentPackages/Core/Transforms/media/img_transp.png"/></td><td class="TextNone">If there was a problem with the TFTP download, you may have the following line in the <span class="WysiwygEmph">show version</span> command display:</td></tr><tr><td class="StepCell"/><td style="padding-left: 0px;padding-bottom: 5px;" class="StepCell"><div class="CodeEPUB"><span class="WysiwygEmph">System image file is "flash:c2800nm-advipservicesk9-mz.124-12.bin"</span></div></td></tr></tbody></table></div></div><div class="TitledBlockType"><div class="TitledBlockType_Title">Activity Verification</div><div class="ParagraphType"><div class="ListType List"><div class="ListPreamble">You have completed this task when you attain these results:</div><table class="UnorderedTable"><tr><td/><td><ul class="Bullet"><li><div class="ItemPara">You have observed and recorded the current Cisco IOS binary file that is stored in flash memory.</div></li></ul></td></tr><tr><td/><td><ul class="Bullet"><li><div class="ItemPara">You have added three boot system commands to modify the startup behavior of the router on reload in the following order:</div><div class="ListType SubList"><table class="UnorderedTable"><tr><td/><td><ul class="nDash"><li><div class="ItemPara">First, attempt to locate a specified Cisco IOS file via a TFTP server.</div></li></ul></td></tr><tr><td/><td><ul class="nDash"><li><div class="ItemPara">If unsuccessful, attempt to locate a specified Cisco IOS file from flash memory.</div></li></ul></td></tr><tr><td/><td><ul class="nDash"><li><div class="ItemPara">Finally, locate the first found Cisco IOS file from flash memory.</div></li></ul></td></tr></table></div></li></ul></td></tr><tr><td/><td><ul class="Bullet"><li><div class="ItemPara">You have reloaded your router and observed the output to determine which of the boot system commands resulted in the system file that was used at startup.</div></li></ul></td></tr><tr><td/><td><ul class="Bullet"><li><div class="ItemPara">You have used the <span class="WysiwygEmph">show version</span> command to verify which method was actually being used.</div></li></ul></td></tr></table></div></div></div></div></body></html>